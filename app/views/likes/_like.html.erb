<% if !current_user?(micropost.user) %>
  <span class="like">
    <% if micropost.like?(current_user) %>
      <%= form_with model: micropost.likes.find_by(user_id: current_user.id), method: :delete do |f| %>
        <div><%= hidden_field_tag :micropost_id, micropost.id %></div>
        <%= button_tag(class: "btn btn-sm") do %>
          <%= tag.span " いいね", class: "fas fa-heart" %>
        <% end %>
      <% end %>
    <% else %>
      <%= form_with model: micropost.likes.build do |f| %>
      <div><%= hidden_field_tag :micropost_id, micropost.id %></div>
        <%= button_tag(class: "btn btn-sm") do %>
          <%= tag.span " いいね", class: "far fa-heart" %>
        <% end %>
      <% end %>
    <% end %>
  </span>
<% end %>
